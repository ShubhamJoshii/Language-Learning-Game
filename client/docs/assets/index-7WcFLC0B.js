import{r as i,j as e,a as re,u as K,b as I}from"./index-VZa65_VQ.js";import{a as fe}from"./index-31q5MBI8.js";import{R as he}from"./react-loading-mrKu6kj4.js";import{n as ae}from"./Notification-KiS3vb1U.js";import{C as ge,A as xe,p as pe,a as me,D as ve}from"./index-vftZAWZk.js";import"./iconBase-ZwOKZIdT.js";function p(){return(p=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t}).apply(this,arguments)}var je=function(){};function oe(t,o){return Math.random()*(o-t+1)+t}function ne(t,o){return Math.floor(oe(t,o))}var ye=i.forwardRef(function(t,o){var s=t.progress,l=t.height,n=l===void 0?2:l,c=t.className,g=c===void 0?"":c,m=t.color,a=m===void 0?"red":m,y=t.background,_=y===void 0?"transparent":y,R=t.onLoaderFinished,r=t.transitionTime,T=r===void 0?300:r,u=t.loaderSpeed,d=u===void 0?500:u,v=t.waitingTime,F=v===void 0?1e3:v,Y=t.shadow,L=Y===void 0||Y,P=t.containerStyle,k=P===void 0?{}:P,f=t.style,j=f===void 0?{}:f,w=t.shadowStyle,D=w===void 0?{}:w,C=t.containerClassName,le=C===void 0?"":C,M=i.useRef(!1),J=i.useState(0),z=J[0],S=J[1],b=i.useRef({active:!1,refreshRate:1e3}),V=i.useState(!1),$=V[0],X=V[1],Z=i.useState({active:!1,value:20}),U=Z[0],ee=Z[1],ue={position:"fixed",top:0,left:0,height:n,background:_,zIndex:99999999999,width:"100%"},de={boxShadow:"0 0 10px "+a+", 0 0 10px "+a,width:"5%",opacity:1,position:"absolute",height:"100%",transition:"all "+d+"ms ease",transform:"rotate(3deg) translate(0px, -4px)",left:"-10rem"},te=i.useState({height:"100%",background:a,transition:"all "+d+"ms ease",width:"0%"}),O=te[0],W=te[1],ie=i.useState(de),A=ie[0],B=ie[1];i.useEffect(function(){return M.current=!0,function(){M.current=!1}},[]),i.useImperativeHandle(o,function(){return{continuousStart:function(x,h){if(h===void 0&&(h=1e3),!U.active)if($)console.warn("react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!");else{var q=x||ne(10,20);b.current={active:!0,refreshRate:h},S(q),Q(q)}},staticStart:function(x){if(!b.current.active)if($)console.warn("react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!");else{var h=x||ne(30,50);ee({active:!0,value:h}),S(h),Q(h)}},complete:function(){$?console.warn("react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!"):(S(100),Q(100))}}}),i.useEffect(function(){W(p({},O,{background:a})),B(p({},A,{boxShadow:"0 0 10px "+a+", 0 0 5px "+a}))},[a]),i.useEffect(function(){if(o){if(o&&s!==void 0)return void console.warn(`react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar! Please use only props or only ref methods! Ref methods will override props if "ref" property is available.`);Q(z),X(!1)}else s&&Q(s),X(!0)},[s]);var se,E,G,Q=function x(h){h>=100?(W(p({},O,{width:"100%"})),L&&B(p({},A,{left:h-10+"%"})),setTimeout(function(){M.current&&(W(p({},O,{opacity:0,width:"100%",transition:"all "+T+"ms ease-out",color:a})),setTimeout(function(){M.current&&(b.current.active&&(b.current=p({},b.current,{active:!1}),S(0),x(0)),U.active&&(ee(p({},U,{active:!1})),S(0),x(0)),R&&R(),S(0),x(0))},T))},F)):(W(function(q){return p({},q,{width:h+"%",opacity:1,transition:h>0?"all "+d+"ms ease":""})}),L&&B(p({},A,{left:h-5.5+"%",transition:h>0?"all "+d+"ms ease":""})))};return se=function(){var x=oe(Math.min(10,(100-z)/5),Math.min(20,(100-z)/3));z+x<95&&(S(z+x),Q(z+x))},E=b.current.active?b.current.refreshRate:null,G=i.useRef(je),i.useEffect(function(){G.current=se}),i.useEffect(function(){},[void 0]),i.useEffect(function(){if(E!==null&&E!==!1){var x=setInterval(function(){return G.current()},E);return function(){return clearInterval(x)}}},[E]),i.createElement("div",{className:le,style:p({},ue,k)},i.createElement("div",{className:g,style:p({},O,j)},L?i.createElement("div",{style:p({},A,D)}):null))});const _e=()=>e.jsx("div",{id:"StartQuizPage",children:e.jsxs("div",{id:"TimeOut",children:[e.jsx(he,{type:"balls",color:"#00a0ff",height:"20%",width:"10%"}),e.jsx("h3",{children:"Please Wait We are Loading Quiz Section..."})]})}),N="/assets/Wrong-AyAkw1L5.png",H="/assets/Right-he35u-gm.png",we=({feedback:t,nextExcerciseQuiz:o,quizQuestion:s,setLoading:l,selectedChoice:n,Answer:c,answedTotal:g,totalQuiz:m})=>{let a=s.Difficulty_Level;const y=()=>{g<m&&(n===s.Answer?(a<3&&a>0?a+=1:a==3,l("Right"),o(a)):(a<=3&&a>1?a-=1:a==1,l("Wrong"),o(a))),g===m&&l("Result")};return e.jsx("div",{id:"StartQuizPage",children:e.jsx("div",{id:"FeedBack",children:e.jsxs(e.Fragment,{children:[t==="Didn't Choice"&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:N,alt:"Wrong_Image"}),e.jsx("h2",{children:"Oops! "}),e.jsx("p",{children:" Your Does not Choice among Options."}),e.jsxs("p",{children:[" The correct answer to the question is ",e.jsx("span",{children:c})]})]}),t==="Wrong"&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:N,alt:"Wrong_Image"}),e.jsx("h2",{children:"Oops! "}),e.jsx("p",{children:" Your answer is incorrect."}),e.jsxs("p",{children:[" The correct answer to the question is ",e.jsx("span",{children:c})]})]}),t==="Right"&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:H,alt:"Right_Image"}),e.jsx("h2",{children:"Great job!"}),e.jsx("p",{children:" Your answer is correct."}),e.jsxs("p",{children:[" Your correct answer to the question is ",e.jsxs("span",{children:['"',c,'"']})]})]}),t==="Difficulty_Level_Upgrade_Medium"&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:H,alt:"Right_Image"}),e.jsx("h2",{children:"Congratulations!"}),e.jsx("p",{children:" Your performance has upgraded to the Medium difficulty level. Keep it up!"}),e.jsxs("p",{children:[" Your correct answer to the question is ",e.jsxs("span",{children:['"',c,'"']})]})]}),t==="Difficulty_Level_Upgrade_Difficult"&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:H,alt:"Right_Image"}),e.jsx("h2",{children:"Congratulations!"}),e.jsx("p",{children:" Outstanding! You're now tackling Difficult questions. Ready for the challenge?"}),e.jsxs("p",{children:[" Your correct answer to the question is ",e.jsxs("span",{children:['"',c,'"']})]})]}),t==="Difficulty_Level_Downgrade_Easy"&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:N,alt:"Wrong_Image"}),e.jsx("h2",{children:"No problem!"}),e.jsx("p",{children:"You've moved back to Easy difficulty. Use this as an opportunity to reinforce your understanding."}),e.jsxs("p",{children:["The Correct answer to the question is ",e.jsxs("span",{children:['"',c,'"']})]})]}),t==="Difficulty_Level_Downgrade_Medium"&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:N,alt:"Wrong_Image"}),e.jsx("h2",{children:"Don't worry,"}),e.jsx("p",{children:"you're doing great! You're now back to Medium difficulty. Keep pushing!"}),e.jsxs("p",{children:["The Correct answer to the question is ",e.jsxs("span",{children:['"',c,'"']})]})]}),e.jsx("button",{onClick:y,children:g<m?"Next Quiz":"Show Result"})]})})})};ge.register(xe,pe,me);const ce=()=>{const[t,o]=i.useState({Correct:0,InCorrect:0}),s=re(),l=K(),n={labels:["Correct","In-Correct"],datasets:[{labels:"Poll",data:[t.Correct,t.InCorrect],backgroundColor:["#1c1a5e","red"],borderColor:["#1c1a5e","red"],hoverOffset:4}]},c={},g=async()=>{await I.get(`/api/fetctResult/${l.excerciseID}`).then(m=>{var a,y;(a=m.data)!=null&&a.message?ae((y=m.data)==null?void 0:y.message,"Warning"):o(m.data)})};return i.useEffect(()=>{g()},[]),e.jsx("div",{id:"StartQuizPage",children:e.jsxs("div",{id:"FeedBack",className:"Result",children:[e.jsx("h2",{children:" Quiz Result "}),e.jsx(ve,{data:n,options:c}),e.jsx("button",{onClick:()=>s("/"),children:"Home"})]})})},De=()=>{var k;const[t,o]=i.useState(10),[s,l]=i.useState(t),[n,c]=i.useState({total:10,answedTotal:0}),[g,m]=i.useState([]),[a,y]=i.useState(10),[_,R]=i.useState(null),[r,T]=i.useState({}),[u,d]=i.useState("Loading");i.useState(null);const v=K();i.useEffect(()=>{const f=setInterval(()=>{o(j=>j>0?j-=1:0)},1e3);return()=>clearInterval(f)},[]),i.useEffect(()=>{if(s!=="Stop"){const f=t/s*100;y(f),t===0&&n.answedTotal<n.total&&u==="Loaded"&&(d("Didn't Choice"),L())}},[t]);const F=async f=>{n.total!==n.answedTotal&&(d("Loading"),v!=null&&v.excerciseID&&await I.get(`/api/excercise/${v.excerciseID}`).then(async j=>{let w=j.data.data;await I.post(`/api/fetchQuiz/${v._id}/${f}`,{attempedQuiz:g}).then(D=>{var C;T(D.data.nextQuiz),c({...n,answedTotal:((C=w==null?void 0:w.AnsweredQuiz)==null?void 0:C.length)+1}),m([...g,D.data.nextQuiz._id]),o(s),R(null),setTimeout(()=>{d("Loaded")},1e3)}).catch(D=>{console.log(D)})}))};i.useEffect(()=>{F(1)},[]);const Y=()=>{if(r.Difficulty_Level===1)return"Easy";if(r.Difficulty_Level===2)return"Medium";if(r.Difficulty_Level===3)return"Difficult"},L=async()=>{const f=s;let j=!1;n.total>n.answedTotal&&(j=!0);let w=!1;_===r.Answer&&(w=!0),n.answedTotal>=1&&v.excerciseID&&await I.post(`/api/saveExercise/${v.excerciseID}`,{QuizLanguageID:v._id,TotalQuiz:n.total,QuizRemaining:j,Question:r.question,AnsweredApplied:_,correctAnswer:w,Difficulty_Level:r.Difficulty_Level}).then(D=>{l(f)})},P=async()=>{n.answedTotal<=n.total&&t!==0&&(await L(),_===r.Answer&&(r.Difficulty_Level===3?d("Right"):r.Difficulty_Level===2?d("Difficulty_Level_Upgrade_Difficult"):r.Difficulty_Level===1&&d("Difficulty_Level_Upgrade_Medium")),_!==r.Answer&&(r.Difficulty_Level===1?d("Wrong"):r.Difficulty_Level===2?d("Difficulty_Level_Downgrade_Easy"):r.Difficulty_Level===3&&d("Difficulty_Level_Downgrade_Medium"))),n.answedTotal===n.total&&ae("All Quiz Attempted","Success")};return e.jsxs(e.Fragment,{children:[u==="Loading"&&e.jsx(_e,{}),u==="Loaded"&&e.jsxs("div",{id:"quiz",children:[e.jsx(ye,{color:"#00bccd",progress:a,onLoaderFinished:()=>y(0)}),e.jsxs("div",{id:"timecount",style:t<s/2?{color:"red"}:{color:""},children:[e.jsx(fe,{}),e.jsxs("p",{children:[t," seconds"]}),e.jsx("p",{children:Y()})]}),e.jsxs("p",{id:"quiz-count",children:["Question ",n.answedTotal," out Of ",n.total]}),e.jsx("h2",{children:r==null?void 0:r.question}),e.jsx("div",{id:"options-btns",children:(k=r==null?void 0:r.Options)==null?void 0:k.map((f,j)=>e.jsx("button",{className:_===f?"selected-Choice":"",onClick:()=>{t<s&&R(_!==f?f:"")},children:f},j))}),e.jsx("button",{id:"next-quiz",onClick:P,children:"Submit"})]}),(u==="Wrong"||u==="Right"||u==="Didn't Choice"||u==="Difficulty_Level_Upgrade_Medium"||u==="Difficulty_Level_Upgrade_Difficult"||u==="Difficulty_Level_Downgrade_Easy"||u==="Difficulty_Level_Downgrade_Medium")&&e.jsx(we,{feedback:u,nextExcerciseQuiz:F,quizQuestion:r,setLoading:d,selectedChoice:_,Answer:r.Answer,totalQuiz:n.total,answedTotal:n.answedTotal}),u==="Result"&&e.jsx(e.Fragment,{children:e.jsx(ce,{})})]})},Se=({createQuizExcercise:t})=>e.jsx("div",{id:"StartQuizPage",children:e.jsxs("div",{id:"StartPage",children:[e.jsx("h3",{children:"Ready to Start Your Quiz?"}),e.jsx("h3",{children:"You have 10 minutes to take this quiz."}),e.jsx("button",{onClick:()=>t(),children:"Start Quiz"})]})}),Ce=()=>{const[t,o]=i.useState("StartPage"),s=K(),l=re(),n=async()=>{s!=null&&s.excerciseID?await I.get(`/api/fetctResult/${s.excerciseID}`).then(c=>{var g;(g=c.data)!=null&&g.message?o("Quiz"):o("Result")}):await I.post(`/api/createQuizExcercise/${s._id}`).then(c=>{c.data.excerciseID&&(l(`/quiz/${s._id}/${c.data.excerciseID}`),o("Quiz"))})};return e.jsxs(e.Fragment,{children:[t==="Quiz"&&e.jsx(De,{}),t==="StartPage"&&e.jsx(Se,{createQuizExcercise:n}),t==="Result"&&e.jsx(ce,{})]})};export{Ce as default};
